{% extends "public/base.html" %}
{% block title %}{{ post.title }}{% endblock %}
{% block content %}
<div class="maincontent">
    <div class="container my-5 pt-5">
        <!-- Post Detail -->
        <div class="card mb-4 shadow-sm hover-effect">
            <div class="card-body">
                <h2 class="card-title">{{ post.title }}</h2>
              <img src="{{ url_for('static', filename=post.image) }}" class="card-img-top" alt="{{ post.title }}">
                <p class="card-text">{{ post.content | safe }}</p>
                <div class="card-footer text-muted">
                    Posted on {{ post.created_at.strftime('%Y-%m-%d') }}
                    {% if post.category %}
                    | Category: <a href="{{ url_for('main.posts', slug=post.category.slug) }}">{{ post.category.name }}</a>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Comments Section -->
        <h3>Comments</h3>
        {% if comments %}
        {% for comment in comments %}
        <div class="card mb-3 shadow-sm hover-effect">
            <div class="card-body">
                <p class="card-text">{{ comment.content }}</p>
                <div class="card-footer text-muted">
                    By {{ comment.user.username }} on {{ comment.created_at.strftime('%Y-%m-%d %H:%M') }}
                </div>
            </div>
        </div>
        {% endfor %}
        {% else %}
        <p>No comments yet. Be the first to comment!</p>
        {% endif %}

        <!-- Comment Form -->
        <div class="card mb-4 shadow-sm hover-effect">
            <div class="card-body">
                <h5 class="card-title">Add a Comment</h5>
                <form method="POST" action="{{ url_for('main.post_detail', slug=post.slug) }}">
                    <div class="mb-3">
                        <textarea class="form-control" name="content" rows="3" placeholder="Write your comment here..." required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Submit Comment</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}